(function () {function d(e,t,r){var o=t.get(e);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(e,r);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=r}return r}function c(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}var b={KEYVAL:"NEjFQLMGv57omxxph5uoht",PLAY_PERCENT:0,WIN_PERCENT:1,POWER:2,NAME:3,CONFIDENCE_INTERVAL_LOWER:4,CONFIDENCE_INTERVAL_UPPER:5,ELO:"e",REGION:"g",PATCH:"h",TIME:"l",QUEUE:"q"};const f=(e,t=!1)=>{return t?Number(e.replace("%","")):Number(e)};const g=(e,t)=>t*(e-50)*10;const h=e=>{const t=e.map(e=>({"Champ Name":e[b.NAME],"Win Percent":e[b.WIN_PERCENT],"Play Percent":e[b.PLAY_PERCENT],Power:e[b.POWER],"95% CI Lower Bound":e[b.CONFIDENCE_INTERVAL_LOWER],"95% CI Upper Bound":e[b.CONFIDENCE_INTERVAL_UPPER]}));console.table(t)};const j=async e=>{const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-1",t);return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")},k=async(e,t="",r="",o="",a="",$="https://power.benc.me")=>{const s=`https://kvdb.io/${b.KEYVAL}`,i={datetime:t,patch:r,queue:o,elo:a,champions:e.slice(0,30)},n=JSON.stringify(i),l=await j(n);await fetch(`${s}/v2-${l}`,{method:"POST",body:n}),window.open(`${$}/?s=v2-${l}`,"_blank")};var a=new WeakMap;class m{constructor(){a.set(this,{writable:!0,value:void 0})}start(){if(null!=c(this,a))throw new Error("already started");d(this,a,Date.now())}stop(){if(null==c(this,a))throw new Error("never started");const e=Date.now()-c(this,a);return d(this,a,void 0),e}clear(){stop()}}(async()=>{const e=new m;e.start();await new Promise(e=>{let t=document.getElementsByClassName("rt-tr-group").length,r=0,o=0;const l=setInterval(()=>{window.scrollTo(0,document.body.scrollHeight),t=r,r=document.getElementsByClassName("rt-tr-group").length;(t===r&&r>=234||o++>Math.ceil(9.36))&&(clearInterval(l),e())},35)}),document.body.scrollTop=document.documentElement.scrollTop=0;const t=Array.from(document.getElementsByClassName("rt-tbody")[0].childNodes),r={};for(let d=0;d<t.length;d++){const e=t[d].childNodes[0],o=e.childNodes[2].getElementsByClassName("champion-name")[0].innerHTML,l=Number(e.childNodes[8].getElementsByTagName("span")[0].innerHTML.replace(",","").replace(",","")),n=f(e.childNodes[4].getElementsByTagName("b")[0].innerHTML,!0);f(e.childNodes[6].getElementsByTagName("span")[0].innerHTML,!0);null==r[o]?r[o]={played:l,won:l*n}:(r[o].played+=l,r[o].won+=l*n)}const o=Object.values(r).reduce((e,{played:t})=>t+e,0),l=Object.keys(r).reduce((e,t)=>{const{won:l,played:n}=r[t],a=l/n/100,s=(a*(1-a)/n)**.5,c=a-1.96*s,i=a+1.96*s;return e.concat([Array.from({[b.WIN_PERCENT]:l/n,[b.PLAY_PERCENT]:100*n/o,[b.POWER]:g(l/n,100*n/o),[b.NAME]:t,[b.CONFIDENCE_INTERVAL_LOWER]:c,[b.CONFIDENCE_INTERVAL_UPPER]:i,length:6})])},[]).sort((e,t)=>t[b.POWER]-e[b.POWER]);h(l);const n=new Date,a=n.toDateString()+" "+n.toTimeString();let s="?",c="?",i="?";try{s=document.querySelector("h1.tier-list > span:nth-child(1)").innerHTML.split(" ").slice(-1)[0]}catch(m){console.error("Couldn't parse patch")}try{c=document.querySelector("span.queue-type > strong:nth-child(1)").innerHTML}catch(m){console.error("Couldn't parse queue")}try{i=document.querySelector("div.filter-select_rank:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > span:nth-child(2)").innerHTML}catch(m){console.error("Couldn't parse rank/elo")}console.log("Took: "+e.stop()+"ms to calculate."),await k(l,a,s,c,i)})();})();